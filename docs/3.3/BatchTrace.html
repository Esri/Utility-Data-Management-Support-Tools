<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:gmd="http://www.isotc211.org/2005/gmd" xmlns:res="http://www.esri.com/metadata/res/">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <style xmlns="" xmlns:esri="http://www.esri.com/metadata/" xmlns:msxsl="http://exslt.org/common" type="text/css" id="internalStyle">
    body {
      font-family: "Segoe UI", Arial, Sans-serif;
      font-size: 10pt;
      color: #4C4C4C;
      background-color: #FFFFFF;
      margin: 6px, 6px, 6px, 6px;
    }
    h1 {
      font-family: "Segoe UI Light", "Segoe UI", Arial, Sans-serif;
      font-size: 14pt;
      color: #0079C1;
      margin: 0px 0px 8px 0px;
    }
    h3 {
      font-family: "Segoe UI semibold", "Segoe UI", Arial, Sans-serif;
      font-size: 12pt;
      margin: 10px 0px 4px 0px;
    }
    span.ContentHeader {
      font-family: "Segoe UI semibold", "Segoe UI", Arial, Sans-serif;
      font-size: 12pt;
    }
    span.SubContentHeader {
      font-family: "Segoe UI", Arial, Sans-serif;
      font-size: 10pt;
      color: #6D6C70;
    }
    span.ElementLabel {
      font-family: "Segoe UI", Arial, Sans-serif;
      font-size: 10pt;
      color: #929497;
    }
    div {
      margin: 0px 0px 0px 0px;
    }
    p {
      margin: 0px 0px 6px 0px;
    }
    .center {
      text-align: center;
    }
    img {
      margin: 8px 0px 8px 0px;
    }
    img.summary {
      width: 210px;
      height: 133px;
      margin: 8px 0px 8px 0px;
    }
    img.center {
      text-align: center;
      display: block;
    }
    img.gp {
      width: auto;
    }
    .noThumbnail {
      #color: rgb(70%, 70%, 70%);
      color: #A6A8AB;
      border-width: 1px;
      border-style: solid;
      #color: rgb(70%, 70%, 70%);
      border-color: #A6A8AB;
      padding: 3em 3em;
      position: relative;
      text-align: center;
      width: 210px;
      height: 140px;
      margin: 8px 0px 8px 0px;
    }
    .noContent {
      #color: rgb(70%, 70%, 70%);
      color: #A6A8AB;
    }
    h3 a.expander:link {
      color: #4C4C4C;
      font-weight: normal;
      text-decoration: none;
    }
    h3 a.expander:visited {
      color: #0079C1;
      text-decoration: none;
    }
    h3 a.expander:link:hover, h3 a.expander:visited:hover {
      color: #0079C1;
      text-decoration: none;
    }
    a.expander:link {
      color: #323232;
      font-weight: normal;
      text-decoration: none;
    }
    a.expander:visited {
      color: #0079C1;
      text-decoration: none;
    }
    a.expander:link:hover, a.expander:visited:hover {
      color: #0079C1;
      text-decoration: none;
    }
    a:link {
      color: #5A9359;
      font-weight: normal;
      text-decoration: none;
    }
    a:visited {
      color: #5A9359;
      text-decoration: none;
    }
    a:link:hover, a:visited:hover {
      color: #257824;
      text-decoration: underline;
    }
    div.hide {
      display: none;
      margin: 0px 0px 20px 0px;
      color: #6D6C70;
    }
    div.show {
      display: block;
      margin: 0px 0px 20px 0px;
    }
    span.hide {
      display: none;
      font-family: Times;
    }
    span.show {
      display: inline-block;
      font-style: normal;
      font-family: Times;
    }
    table {
      margin: 0px 0px 0px 0px;
      padding: 0px 0px 8px 0px;
      border-collapse:collapse;
      font-size: 10pt;
    }
    th {
      font-family: "Segoe UI Semibold", Arial, Sans-serif;
      color: #4C4C4C;
      /* color: #6C6D70 for dialog/python reference heading; */
      text-align: left;
      vertical-align: bottom;
      border-bottom: 1px solid #4C4C4C;
    }
    td {
      text-align: left;
      vertical-align: top;
    }
    td.description {
      vertical-align: center;
    }
    td.gp {
      padding: 8px 8px 8px 8px;
      border-bottom: 1px solid #4C4C4C;
    }
    ul {
      margin: 0px 0px 0px 10px;
      padding: 0px 0px 0px 10px;
    }
    li {
      margin: 0px 0px 0px 0px;
      padding: 0px 0px 0px 10px;
    }
    ul ul {
      list-style-type: square;
    }
    pre.wrap {
      width: 99%;
      font-family: "Segoe UI", Arial, Sans-serif;
      font-size: 10pt;
      margin: 0px 0px 0px 0px;
      white-space: pre-wrap;       /* css-3 */
      white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
      white-space: -pre-wrap;      /* Opera 4-6 */
      white-space: -o-pre-wrap;    /* Opera 7 */
      word-wrap: break-word;       /* Internet Explorer 5.5+ */
    }
    pre.wrap p {
      padding-bottom: 1em;
    }
    pre.wrap li {
      padding-bottom: 1em;
    }
    pre.wrap br {
      display: block;
    }
    pre.gp {
      font-family: Courier New, Courier, monospace;
    }
    .gpcode {
      border: 1px dashed #ACC6D8;
      padding: 10px;
      background-color:#EEEEEE;
      height: auto;
      overflow: scroll; 
      width: 98%;
    }
    .code {
      font-family: monospace;
    }

    p.gp {
      margin: 7px 0px 7px 0px;
    }
    dl {
      margin: 0px 0px 0px 0px;
    }
    dt {
      margin: 0px 0px 0px 15px;
      clear: left;
    }
    dd {
      margin: 0px 0px 0px 15px;
      clear: left;
    }
  </style>
    <style>.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
  </head>
  <body oncontextmenu="return true">
    <h1 xmlns="" xmlns:esri="http://www.esri.com/metadata/" xmlns:msxsl="http://exslt.org/common">BatchTrace</h1>
    <p xmlns=""><span class="ContentHeader">Title</span>â€ƒ
				Batch Trace</p>
    <div xmlns="" xmlns:esri="http://www.esri.com/metadata/" xmlns:msxsl="http://exslt.org/common">
      <h3>Description</h3>
      <p>
        <pre class="wrap">Iterate through the starting points to trace the utility network and use the results.</pre>
      </p>
    </div>
    <div xmlns="">
      <h3>Usage</h3>
      <p>
        <pre class="wrap">
          <span>
This tool uses a with starting point information to trace the utility network. The starting points are optionally grouped so set of starting points is used in each trace.
The trace results can be used to select features in a map, calculate values on results, create connectivity and element files or save the aggregated geometry with summary information.
The starting points layer uses a field to determine if a row is a starting point and/or barrier. A feature as a starting point and filter barrier is useful in a connected trace to determine all the items between the starting points.

The starting points table requires the following fields:
<ul><li>FEATUREGLOBALID: GUID or GLOBALID: GlobalID</li><li>TERMINALID: Short</li><li>PERCENTALONG: Double</li></ul>

<h3>License</h3>Standard<h3>Toolset</h3>Utility Network</span>
        </pre>
      </p>
    </div>
    <div xmlns="">
      <h3>Syntax</h3>
      <p>BatchTrace (in_utility_network, trace_locations, result_types, trace_config, {expression}, {output_folder}, {key_field}, {summary_store_field}, {fields}, {calc_on_start}, {history_field}, {default_terminal_id}) <br xmlns:esri="http://www.esri.com/metadata/" xmlns:msxsl="http://exslt.org/common" /><br xmlns:esri="http://www.esri.com/metadata/" xmlns:msxsl="http://exslt.org/common" /></p>
      <table xmlns:esri="http://www.esri.com/metadata/" xmlns:msxsl="http://exslt.org/common">
        <tr>
          <th width="30%">Parameter</th>
          <th width="50%">Explanation</th>
          <th width="20%">Data Type</th>
        </tr>
        <tr>
          <td class="gp">in_utility_network</td>
          <td class="gp" align="left">
            <span class="SubContentHeader">Dialog Reference</span>
            <br />
            <span>
              <p>The utility network that will be used to trace.</p>
            </span>
          </td>
          <td class="gp" align="left">GPUtilityNetworkLayer</td>
        </tr>
        <tr>
          <td class="gp">trace_locations</td>
          <td class="gp" align="left">
            <span class="SubContentHeader">Dialog Reference</span>
            <br />
            <span>
              <p>The table from which to load starting points for trace.</p>
            </span>
          </td>
          <td class="gp" align="left">GPTableView</td>
        </tr>
        <tr>
          <td class="gp">result_types</td>
          <td class="gp" align="left">
            <span class="SubContentHeader">Dialog Reference</span>
            <br />
            <span>
              <p>
Specifies the type of results that will be returned by the trace.
<ul><li>Selection - The trace results will be returned as a selection set on the appropriate network features.</li><li>Aggregated Geometry - The trace results will be aggregated by geometry type and stored in multipart feature classes displayed in the layers in the active map.</li><li>Connectivity - The trace results will be returned as a connectivity graph in a specified output .json file. This option requires the Output JSON parameter.</li><li>Elements - The trace results will be returned as feature-based information in a specified output .json file. This option requires the Output JSON parameter.</li><li>Calculate - Update a field in the trace results from information on the starting points. If multiple starting points are used, the value from the lowest OID is used.</li></ul>
			</p>
            </span>
          </td>
          <td class="gp" align="left">GPString</td>
        </tr>
        <tr>
          <td class="gp">trace_config</td>
          <td class="gp" align="left">
            <span class="SubContentHeader">Dialog Reference</span>
            <br />
            <span>
              <p>The utility network trace configuration used to define the trace parameters or a field with trace configurations.</p>
            </span>
          </td>
          <td class="gp" align="left">GPString</td>
        </tr>
        <tr>
          <td class="gp">expression (Optional) </td>
          <td class="gp" align="left">
            <span class="SubContentHeader">Dialog Reference</span>
            <br />
            <span>
              <p>The simple calculation expression used to limit the starting points used in a trace.</p>
            </span>
          </td>
          <td class="gp" align="left">GPSQLExpression</td>
        </tr>
        <tr>
          <td class="gp">output_folder (Optional) </td>
          <td class="gp" align="left">
            <span class="SubContentHeader">Dialog Reference</span>
            <br />
            <span>
              <p>The location of the output items.  If specified, a stats mobile geodatabase is created here.
The folder is required for the Connectivity, Elements and Aggregated Results result types.
For Connectivity and Elements result types, the json_files folder will contain the resulting files.
For the Aggregated Results result type, a mobile geodatabase called AggregatedGeometry is created in this location.</p>
            </span>
          </td>
          <td class="gp" align="left">DEFolder</td>
        </tr>
        <tr>
          <td class="gp">key_field (Optional) </td>
          <td class="gp" align="left">
            <span class="SubContentHeader">Dialog Reference</span>
            <br />
            <span>
              <p>Field used to group starting points and barriers. When specified, records with the same value will used for a single trace. By default, a trace is run for every starting point.</p>
            </span>
          </td>
          <td class="gp" align="left">Field</td>
        </tr>
        <tr>
          <td class="gp">summary_store_field (Optional) </td>
          <td class="gp" align="left">
            <span class="SubContentHeader">Dialog Reference</span>
            <br />
            <span>
              <p>Optional field used to store summary results on the starting points.</p>
            </span>
          </td>
          <td class="gp" align="left">GPString</td>
        </tr>
        <tr>
          <td class="gp">fields (Optional) </td>
          <td class="gp" align="left">
            <span class="SubContentHeader">Dialog Reference</span>
            <br />
            <span>
              <p>
The mapping of starting points field to network source field. This parameter is only applicable for the Calculation result type. Mapping components are as follows:
<ul><li>From Field - The field from the starting points to propagate.</li><li>Source Name - The name of the utility network source.</li><li>To Field - The field on the source class to update.</li><li>Calculation Mode - How to combine values.</li></ul>
Calculation mode supports:
<ul><li>Concatenate with existing - Read existing values and combine with new values.</li><li>Concatenate and overwrite - Combine new values.</li></ul>
			</p>
            </span>
          </td>
          <td class="gp" align="left">GPValueTable</td>
        </tr>
        <tr>
          <td class="gp">calc_on_start (Optional) </td>
          <td class="gp" align="left">
            <span class="SubContentHeader">Dialog Reference</span>
            <br />
            <span>
              <p>If specified, the calculate will also update the features the starting points are placed on.</p>
            </span>
          </td>
          <td class="gp" align="left">GPBoolean</td>
        </tr>
        <tr>
          <td class="gp">history_field (Optional) </td>
          <td class="gp" align="left">
            <span class="SubContentHeader">Dialog Reference</span>
            <br />
            <span>
              <p>A field with a historical date value(as a string) that will be used to run a trace in a previous moment to compare to the current moment.</p>
            </span>
          </td>
          <td class="gp" align="left">Field</td>
        </tr>
        <tr>
          <td class="gp">default_terminal_id (Optional) </td>
          <td class="gp" align="left">
            <span class="SubContentHeader">Dialog Reference</span>
            <br />
            <span>
              <p>The default terminal ID for starting locations when the terminal ID field is not present or null and the percent along value is less than 0.</p>
            </span>
          </td>
          <td class="gp" align="left">GPLong</td>
        </tr>
      </table>
    </div>
    <div xmlns="">
      <h3>Code Samples</h3>
      <p>
        <span class="span.SubContentHeader">BatchTrace example 1 (Python window)</span>
        <br />
      </p>
      <p>
        <pre class="wrap">Iterate through the starting points to trace the utility network and use the results.</pre>
      </p>
      <div class="highlight">
        <pre><span></span><span class="kn">import</span> <span class="nn">arcpy</span>

<span class="n">arcpy</span><span class="o">.</span><span class="n">udms</span><span class="o">.</span><span class="n">BatchTrace</span><span class="p">(</span>
    <span class="s2">"D:/data/UtilityNetwork.gdb/UtilityNetwork/Network"</span><span class="p">,</span>
    <span class="s2">"D:/data/TraceLocations.gdb/Starting_Points"</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">"SELECTION"</span><span class="p">,</span>
        <span class="s2">"AGGREGATED_GEOMETRY"</span><span class="p">,</span>
        <span class="s2">"CONNECTIVITY"</span><span class="p">,</span>
        <span class="s2">"ELEMENTS"</span><span class="p">,</span>
        <span class="s2">"CONTAINMENT_AND_ATTACHMENT_ASSOCIATIONS"</span><span class="p">,</span>
        <span class="s2">"FEATURES"</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s2">"D:/data/"</span><span class="p">,</span>
    <span class="kc">None</span><span class="p">,</span>
    <span class="kc">None</span><span class="p">,</span>
    <span class="s2">"SectionName"</span><span class="p">,</span>
    <span class="kc">None</span><span class="p">,</span>
    <span class="s2">"Trace Config:: Connected Items"</span><span class="p">,</span>
    <span class="kc">None</span><span class="p">,</span>
    <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</pre>
      </div>
      <br />
      <p>
        <span class="span.SubContentHeader">BatchTrace example 2 (stand-alone script)</span>
        <br />
      </p>
      <p>
        <pre class="wrap">Iterate through the starting points to trace the utility network and use the results.</pre>
      </p>
      <div class="highlight">
        <pre><span></span><span class="kn">import</span> <span class="nn">arcpy</span>

<span class="n">utility_network</span> <span class="o">=</span> <span class="s2">"D:/data/UtilityNetwork.gdb/UtilityNetwork/Network"</span>
<span class="n">trace_locations</span> <span class="o">=</span> <span class="s2">"D:/data/TraceLocations.gdb/Starting_Points"</span>
<span class="n">result_types</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"SELECTION"</span><span class="p">,</span>
    <span class="s2">"AGGREGATED_GEOMETRY"</span><span class="p">,</span>
    <span class="s2">"CONNECTIVITY"</span><span class="p">,</span>
    <span class="s2">"ELEMENTS"</span><span class="p">,</span>
    <span class="s2">"CONTAINMENT_AND_ATTACHMENT_ASSOCIATIONS"</span><span class="p">,</span>
    <span class="s2">"FEATURES"</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">output_folder</span> <span class="o">=</span> <span class="s2">"D:/data"</span>
<span class="n">key_field</span> <span class="o">=</span> <span class="s2">"SectionName"</span>
<span class="n">trace_config</span> <span class="o">=</span> <span class="s2">"Trace Config:: Connected Items"</span>

<span class="n">arcpy</span><span class="o">.</span><span class="n">udms</span><span class="o">.</span><span class="n">BatchTrace</span><span class="p">(</span>
    <span class="n">utility_network</span><span class="o">=</span><span class="n">utility_network</span><span class="p">,</span>
    <span class="n">trace_locations</span><span class="o">=</span><span class="n">trace_locations</span><span class="p">,</span>
    <span class="n">result_types</span><span class="o">=</span><span class="n">result_types</span><span class="p">,</span>
    <span class="n">output_folder</span><span class="o">=</span><span class="n">output_folder</span><span class="p">,</span>
    <span class="n">summary_store_field</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">field_mapping</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">key_field</span><span class="o">=</span><span class="n">key_field</span><span class="p">,</span>
    <span class="n">expression</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">trace_config</span><span class="o">=</span><span class="n">trace_config</span><span class="p">,</span>
    <span class="n">calc_on_start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">history_field</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</pre>
      </div>
    </div>
  </body>
</html>
